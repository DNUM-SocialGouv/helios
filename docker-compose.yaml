version: '3.9'

services:
  sftp:
    image: atmoz/sftp
    container_name: helios_sftp
    ports:
      - target: 22
        published: 22
    volumes:
      - type: bind
        source: $PWD/data_set
        target: /home/usr_finess_ls
      - type: bind
        source: $HOME/.ssh/sftp_local.pub
        target: /home/usr_finess_ls/.ssh/keys/sftp_local.pub
        read_only: true
    command: usr_finess_ls:helios:1001
  postgres:
    image: postgres:13.6-alpine
    container_name: helios_db
    ports:
      - target: 5432
        published: 5432
    environment:
      POSTGRES_DB: helios
      POSTGRES_USER: helios
      POSTGRES_PASSWORD: h3li0s
    volumes:
      - type: volume
        source: postgres_data
        target: /var/lib/postgresql/data

  postgres-test:
    image: postgres:13.6-alpine
    container_name: helios_test_db
    ports:
      - target: 5432
        published: 5433
    environment:
      POSTGRES_DB: helios
      POSTGRES_USER: helios
      POSTGRES_PASSWORD: h3li0s
    volumes:
      - type: volume
        source: postgres_data_test
        target: /var/lib/postgresql/data

volumes:
  postgres_data:
  postgres_data_test:
